# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure
runConfig:
  maxInstances: 1
backend:
  run: cd backend && gunicorn --workers 1 --threads 8 --timeout 0 main:app
  directory: backend
  instanceSize: 256M
serving:
  - id: frontend
    source:
      directory: frontend
    maxInstances: 1
    minInstances: 0
    instanceSize: 256M
  - id: backend
    source:
      directory: backend
    maxInstances: 1
    minInstances: 0
    instanceSize: 256M
    env:
      - variable: DATABASE_URL
        secret: DATABASE_URL
      - variable: ENV
        value: producao
rewrites:
  - source: /api/**
    serviceId: backend
  - source: /**
    serviceId: frontend
requiredSecrets:
  - secret: DATABASE_URL
    resource: projects/studioproj-75955/secrets/DATABASE_URL
    version: '1'
